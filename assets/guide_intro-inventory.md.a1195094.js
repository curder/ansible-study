import{_ as s,c as a,o as n,d as l}from"./app.a736197e.js";const h=JSON.parse('{"title":"主机清单","description":"","frontmatter":{},"headers":[{"level":2,"title":"主机清单基础","slug":"主机清单基础","link":"#主机清单基础","children":[{"level":3,"title":"默认组","slug":"默认组","link":"#默认组","children":[]},{"level":3,"title":"多组主机","slug":"多组主机","link":"#多组主机","children":[]},{"level":3,"title":"父/子组关系","slug":"父-子组关系","link":"#父-子组关系","children":[]},{"level":3,"title":"添加主机范围","slug":"添加主机范围","link":"#添加主机范围","children":[]}]},{"level":2,"title":"传递多个主机清单源","slug":"传递多个主机清单源","link":"#传递多个主机清单源","children":[]},{"level":2,"title":"变量","slug":"变量","link":"#变量","children":[{"level":3,"title":"主机变量","slug":"主机变量","link":"#主机变量","children":[]},{"level":3,"title":"组变量","slug":"组变量","link":"#组变量","children":[]}]}],"relativePath":"guide/intro-inventory.md","lastUpdated":1676690218000}'),e={name:"guide/intro-inventory.md"},p=l(`<h1 id="主机清单" tabindex="-1">主机清单 <a class="header-anchor" href="#主机清单" aria-hidden="true">#</a></h1><p>主机清单是一个包含主机和组列表的文件，默认位置是 <code>/etc/ansible/hosts</code>，可以在命令行中使用选项或在配置中使用 <code>-i &lt;path&gt;</code> 指定不同的清单文件。</p><h2 id="主机清单基础" tabindex="-1">主机清单基础 <a class="header-anchor" href="#主机清单基础" aria-hidden="true">#</a></h2><p>主机清单的内容由格式、主机和组所组成。</p><p>可以使用多种格式中任意选择一种格式来创建清单文件，具体取决于使用的<a href="https://docs.ansible.com/ansible/latest/plugins/inventory.html#inventory-plugins" target="_blank" rel="noreferrer">主机清单插件</a>。</p><p>最常见的格式是 <code>ini</code> 和 <code>yaml</code>。比如：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-GF3ab" id="tab-1L_CcwC" checked="checked"><label for="tab-1L_CcwC">ini格式</label><input type="radio" name="group-GF3ab" id="tab-ObSNfyY"><label for="tab-ObSNfyY">yaml格式</label></div><div class="blocks"><div class="language-ini active"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">mail.example.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 括号中的标题是组名，用于对主机进行分类并决定在什么时间以及出于什么目的控制哪些主机。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 组名不能以数字开头，也不能使用除 _ 以外的其他符号，比如不能使用 - 等</span></span>
<span class="line"><span style="color:#89DDFF;">[web_servers]</span></span>
<span class="line"><span style="color:#A6ACCD;">foo.example.com</span></span>
<span class="line"><span style="color:#A6ACCD;">192.168.1.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[db_servers]</span></span>
<span class="line"><span style="color:#A6ACCD;">one.example.com</span></span>
<span class="line"><span style="color:#A6ACCD;">two.example.com</span></span>
<span class="line"><span style="color:#A6ACCD;">ww[1:3].example.com</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">ungrouped</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">mail.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">web_servers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">foo.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">192.168.1.1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">db_servers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">one.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">two.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ww[1:3].example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span></code></pre></div></div></div><p>以上定义的主机清单文件中包含有 <code>ungrouped</code>、<code>all</code>、<code>web_servers</code> 和 <code>db_servers</code> 组。其中<code>ungrouped</code> 和 <code>all</code> 组是 ansible 默认创建的组。</p><h3 id="默认组" tabindex="-1">默认组 <a class="header-anchor" href="#默认组" aria-hidden="true">#</a></h3><p>即使没有在清单文件中定义任何组，Ansible 也会创建两个默认组：<code>all</code> 和 <code>ungrouped</code>。</p><ul><li><code>all</code>组包含每个主机</li><li><code>ungrouped</code> 组包含除了 <code>all</code> 之外没有其他组的所有主机</li></ul><p>每个主机将始终属于至少 2 个组（<code>all</code> 和 <code>ungrouped</code> 或 <code>all</code> 以及自定义的组）。</p><p>例如上面的主机清单中，主机 <code>mail.example.com</code> 属于 <code>all</code> 组和 <code>ungrouped</code> 组，主机 <code>foo.example.com</code> 属于 <code>all</code> 组和 <code>db_servers</code> 组。</p><p>尽管 <code>all</code> 和 <code>ungrouped</code> 始终存在，但它们是隐式的。</p><h3 id="多组主机" tabindex="-1">多组主机 <a class="header-anchor" href="#多组主机" aria-hidden="true">#</a></h3><p>在编写主机清单配置时，根据业务可以且可能会将同一个主机放在多个组中，比如根据主机包含的业务（What），主机存放的区域（Where），主机资源阶段（When）比如标记为开发阶段避免对线上资源进行测试。</p><p>扩展前面的 yaml 主机清单，包括内容、时间和地点：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#F07178;">ungrouped</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">mail.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">web_servers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">foo.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">192.168.1.1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">db_servers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">one.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">two.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ww[1:10].example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#F07178;">singapore</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">foo.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ww[1:10].example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#F07178;">hongkong</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">one.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">two.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#F07178;">prod</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">foo.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ww[1:10].example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">one.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">two.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span></code></pre></div><p>可以看到 <code>one.example.com</code> 主机存在于 <code>db_servers</code>、<code>test</code>、和 <code>hongkong</code>组中。</p><h3 id="父-子组关系" tabindex="-1">父/子组关系 <a class="header-anchor" href="#父-子组关系" aria-hidden="true">#</a></h3><p>可以在组之间创建父/子关系。父组也称为嵌套组或组的组。</p><p>为组创建父/子关系：</p><ul><li>在 <code>ini</code> 格式中，使用 <code>:children</code> 后缀</li><li>在 <code>yaml</code> 格式中，使用 <code>children:</code> 条目</li></ul><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#F07178;">ungrouped</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">mail.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">web_servers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">foo.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">192.168.1.1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">db_servers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">one.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">two.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ww[1:10].example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">singapore</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">foo.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ww[1:10].example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">hongkong</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">one.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">two.example.com</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">prod</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">children</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">singapore</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">children</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hongkong</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span></code></pre></div><p>子组有几个属性需要注意：</p><ul><li>作为子组成员的任何主机自动成为父组的成员。</li><li>组可以有多个父子，但不能有循环关系。</li><li>主机也可以在多个组中，但在运行时只会有一个主机实例。Ansible 合并来自多个组的数据。</li></ul><h3 id="添加主机范围" tabindex="-1">添加主机范围 <a class="header-anchor" href="#添加主机范围" aria-hidden="true">#</a></h3><p>如果有很多具有相似模式的主机，可以将它们添加为一个范围而不是单独列出每个主机名：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-2n1Ae" id="tab-wa29l37" checked="checked"><label for="tab-wa29l37">ini</label><input type="radio" name="group-2n1Ae" id="tab-HMtaOU5"><label for="tab-HMtaOU5">yaml</label></div><div class="blocks"><div class="language-ini active"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[web_servers]</span></span>
<span class="line"><span style="color:#A6ACCD;">www[1:5].example.com</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">web_servers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">www[1:5].example.com</span></span>
<span class="line"></span></code></pre></div></div></div><p>在定义主机的序列范围时，同时可以指定步幅（序列号之间的增量）：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-NSrS1" id="tab-iFnouIJ" checked="checked"><label for="tab-iFnouIJ">ini 格式主机清单</label><input type="radio" name="group-NSrS1" id="tab-KPBD0DX"><label for="tab-KPBD0DX">yaml 格式主机清单</label></div><div class="blocks"><div class="language-ini active"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[webservers]</span></span>
<span class="line"><span style="color:#A6ACCD;">www[1:5:2].example.com</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">web_servers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">www[1:5:2].example.com</span></span>
<span class="line"></span></code></pre></div></div></div><p>上面的示例将使子域 <code>www1</code>、<code>www3</code>、<code>www5</code>匹配，但不匹配 <code>www0</code>、<code>www2</code>，因为步幅（增量）是每步 2 个单位。</p><p>对于数字模式，可以根据需要包含或删除前导零。还可以定义字母范围：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-ZW82R" id="tab-EQ52NhJ" checked="checked"><label for="tab-EQ52NhJ">ini</label><input type="radio" name="group-ZW82R" id="tab-8pFafu6"><label for="tab-8pFafu6">yaml</label></div><div class="blocks"><div class="language-ini active"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[databases]</span></span>
<span class="line"><span style="color:#A6ACCD;">db-[a:f].example.com</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">databases</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">db-[a:f].example.com</span></span>
<span class="line"></span></code></pre></div></div></div><h2 id="传递多个主机清单源" tabindex="-1">传递多个主机清单源 <a class="header-anchor" href="#传递多个主机清单源" aria-hidden="true">#</a></h2><p>可以通过从命令行提供多个清单参数或通过配置文件来同时定位多个主机清单源（目录、动态清单脚本或清单插件支持的文件），比如对生成和测试环境同时执行某项命令。</p><div class="language-bashj"><button title="Copy Code" class="copy"></button><span class="lang">bashj</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">ansible all -i src/stage.yml -i src/prod.yml -m ping</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><blockquote><p>这样的做法能将不同环境的主机清单记录到不同的配置文件中</p></blockquote><h2 id="变量" tabindex="-1">变量 <a class="header-anchor" href="#变量" aria-hidden="true">#</a></h2><p>Ansible 可以在主机清单中存储与特定主机或组相关的变量值，方便对不同的主机进行配置。</p><h3 id="主机变量" tabindex="-1">主机变量 <a class="header-anchor" href="#主机变量" aria-hidden="true">#</a></h3><p>在主机清单中可以轻松的将变量分配给单个主机，比如：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-TbKmp" id="tab-nZvZKhc" checked="checked"><label for="tab-nZvZKhc">ini</label><input type="radio" name="group-TbKmp" id="tab-SGrQ76j"><label for="tab-SGrQ76j">yaml</label></div><div class="blocks"><div class="language-ini active"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[web]</span></span>
<span class="line"><span style="color:#A6ACCD;">host1 </span><span style="color:#F07178;">http_port</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">80 </span><span style="color:#F07178;">maxRequestsPerChild</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">808</span></span>
<span class="line"><span style="color:#A6ACCD;">host2 </span><span style="color:#F07178;">http_port</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">443 </span><span style="color:#F07178;">maxRequestsPerChild</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">909</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">host1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">http_port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">maxRequestsPreChild</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">808</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">host2</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">http_port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">443</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">maxRequestsPreChild</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">909</span></span>
<span class="line"></span></code></pre></div></div></div><p>以上针对不同的主机配置了指定的 <code>http_port</code> 和 <code>maxRequestsPreChild</code> 变量。</p><p>SSH连接的变量也可以作为宿主变量使用：</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[web]</span></span>
<span class="line"><span style="color:#A6ACCD;">localhost </span><span style="color:#F07178;">ansible_connection</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">ssh </span><span style="color:#F07178;">ansible_host</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">localhost </span><span style="color:#F07178;">ansible_port</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">22 </span><span style="color:#F07178;">ansible_user</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">curder </span><span style="color:#F07178;">ansible_ssh_private_key_file</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">~/.ssh/id_rsa</span></span>
<span class="line"></span></code></pre></div><p><a href="https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html?q=ansible_connection&amp;check_keywords=yes&amp;area=default#connecting-to-hosts-behavioral-inventory-parameters" target="_blank" rel="noreferrer">更多 ansible 连接参数配置查看这里</a></p><h4 id="主机别名" tabindex="-1">主机别名 <a class="header-anchor" href="#主机别名" aria-hidden="true">#</a></h4><p>可以使用主机变量在清单中定义别名，比如下面的示例将主机定义一个别名 <code>jumper</code></p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-BNOhs" id="tab-PxE0PI7" checked="checked"><label for="tab-PxE0PI7">ini</label><input type="radio" name="group-BNOhs" id="tab-bOnVVVA"><label for="tab-bOnVVVA">yaml</label></div><div class="blocks"><div class="language-ini active"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">jumper </span><span style="color:#F07178;">ansible_port</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">22 </span><span style="color:#F07178;">ansible_host</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">127.0.0.1</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">ungrouped</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">jumper</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">ansible_port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">22</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">ansible_host</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">127.0.0.1</span></span>
<span class="line"></span></code></pre></div></div></div><h3 id="组变量" tabindex="-1">组变量 <a class="header-anchor" href="#组变量" aria-hidden="true">#</a></h3><p>如果一个组中的所有主机共享一个或多个变量值，可以使用 <code>:vars</code> 将该变量应用于整个组。</p>`,52),o=[p];function c(t,i,r,d,y,F){return n(),a("div",null,o)}const C=s(e,[["render",c]]);export{h as __pageData,C as default};
