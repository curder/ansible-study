import{_ as s,c as a,o,N as n}from"./chunks/framework.3e506893.js";const h=JSON.parse('{"title":"unarchive 模块","description":"","frontmatter":{},"headers":[],"relativePath":"module/unarchive.md","lastUpdated":1681135075000}'),l={name:"module/unarchive.md"},e=n(`<h1 id="unarchive-模块" tabindex="-1">unarchive 模块 <a class="header-anchor" href="#unarchive-模块" aria-label="Permalink to &quot;unarchive 模块&quot;">​</a></h1><p><a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/unarchive_module.html" target="_blank" rel="noreferrer">unarchive 模块</a> 可以解压缩档案，但是它不会解压缩不包含存档的压缩文件。</p><p>默认情况下，它会在解包之前将源文件从本地复制到远程目标机器，可以指定 <code>remote_src=yes</code> 参数用于解压缩远程目标机器上已存在的存档。</p><h2 id="常用参数" tabindex="-1">常用参数 <a class="header-anchor" href="#常用参数" aria-label="Permalink to &quot;常用参数&quot;">​</a></h2><table><thead><tr><th>参数名</th><th>是否必须</th><th>参数类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>src</code></td><td>是</td><td><code>string</code></td><td></td><td>要复制到目标服务器的存档文件的本地绝对的或相对的路径</td></tr><tr><td><code>dest</code></td><td>是</td><td><code>string</code></td><td></td><td>解压缩远程绝对路径，此路径必须存在，因为基本目录不由当前模块创建。</td></tr><tr><td><code>remote_src</code></td><td>否</td><td><code>boolean</code></td><td><code>false</code></td><td><code>true</code> 则表示存档文件已经在远程系统上，而不是本地文件。</td></tr></tbody></table><p>更多参数可以使用命令 <code>ansible-doc -s unarchive</code> 获取更多使用相关的文档或者<a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/unarchive_module.html#parameters" target="_blank" rel="noreferrer">查看官方文档</a>。</p><h2 id="一些示例" tabindex="-1">一些示例 <a class="header-anchor" href="#一些示例" aria-label="Permalink to &quot;一些示例&quot;">​</a></h2><h3 id="复制本地文件到远程并解压缩" tabindex="-1">复制本地文件到远程并解压缩 <a class="header-anchor" href="#复制本地文件到远程并解压缩" aria-label="Permalink to &quot;复制本地文件到远程并解压缩&quot;">​</a></h3><p>将本地文件 <code>foo.tar.gz</code> 提取到远程目标机器上的 <code>/tmp/foo</code>。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ansible</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">src/inventory.yml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shell</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mkdir /tmp/foo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 在远程目标机器上创建目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">ansible</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">src/inventory.yml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unarchive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">src=./foo.tar.gz dest=/tmp/foo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 将本地文件复制到远程及其并解压缩</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">ansible</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">src/inventory.yml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shell</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ls /tmp/foo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 查看远程目标机器上的目录</span></span></code></pre></div><h3 id="解压缩远程机器的压缩文件" tabindex="-1">解压缩远程机器的压缩文件 <a class="header-anchor" href="#解压缩远程机器的压缩文件" aria-label="Permalink to &quot;解压缩远程机器的压缩文件&quot;">​</a></h3><p>将远程主机上的 <code>/tmp/bar.tar.gz</code> 解压缩到 <code>/tmp/bar</code>。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ansible</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">src/inventory.yml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unarchive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">src=/tmp/bar.tar.gz dest=/tmp/bar remote_src=true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 解压缩远程机器的文件</span></span></code></pre></div><h3 id="下载文件并解压缩" tabindex="-1">下载文件并解压缩 <a class="header-anchor" href="#下载文件并解压缩" aria-label="Permalink to &quot;下载文件并解压缩&quot;">​</a></h3><p>下载 <a href="https://nginx.org/download/nginx-1.23.4.tar.gz" target="_blank" rel="noreferrer">Nginx 源码包</a>并解压缩到 <code>/tmp</code> 目录下。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ansible</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">src/inventory.yml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unarchive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">src=https://nginx.org/download/nginx-1.23.4.tar.gz dest=/tmp remote_src=true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 解压缩从网上下载的Nginx压缩包</span></span></code></pre></div>`,16),t=[e];function p(r,c,C,d,i,y){return o(),a("div",null,t)}const A=s(l,[["render",p]]);export{h as __pageData,A as default};
